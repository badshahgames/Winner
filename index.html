<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Badshah Games - Login</title>
    <style>
        body {
            background: #0f172a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Poppins', sans-serif;
        }
        .login-box {
            background: rgba(30, 41, 59, 0.8);
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }
        .logo {
            color: #f59e0b;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }
        #googleLogin {
            background: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="login-box">
        <div class="logo">BADSHAH GAMES</div>
        <p style="color: #94a3b8; margin-bottom: 2rem;">Color Trading Platform</p>
        <button id="googleLogin">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20">
            Sign in with Google
        </button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // Firebase Auth
        document.getElementById('googleLogin').addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    // Check if new user
                    const userRef = firebase.firestore().collection('users').doc(result.user.uid);
                    userRef.get().then((doc) => {
                        if (!doc.exists) {
                            userRef.set({
                                name: result.user.displayName,
                                balance: 0, // Start with 0 balance
                                createdAt: firebase.firestore.FieldValue.serverTimestamp()
                            });
                        }
                        window.location.href = 'game.html';
                    });
                })
                .catch((error) => {
                    alert('Login failed: ' + error.message);
                });
        });
    </script>
</body>
</html>
